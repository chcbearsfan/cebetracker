<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>OranjeBTC Modeler | CEBE Tracker</title>
    <meta name="description" content="Model OranjeBTC share price through CEBE. LATAM's largest Bitcoin treasury company. Zero-coupon convertible note, BRL/USD dynamics.">
    <meta name="application-name" content="CEBE">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="CEBE">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#09090b">
    <meta name="msapplication-TileColor" content="#09090b">
    <link rel="apple-touch-icon" href="/icon-192.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Crect fill='%2309090b' width='32' height='32' rx='4'/%3E%3Ccircle cx='13' cy='13' r='8' fill='none' stroke='%23f97316' stroke-width='2'/%3E%3Cline x1='19' y1='19' x2='27' y2='27' stroke='%23f97316' stroke-width='2.5' stroke-linecap='round'/%3E%3Ctext x='13' y='17' font-family='Arial,sans-serif' font-size='10' font-weight='700' fill='%23f97316' text-anchor='middle'%3E%E2%82%BF%3C/text%3E%3C/svg%3E">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root{--bg-primary:#09090b;--bg-secondary:#0f0f11;--bg-card:#141416;--bg-elevated:#1a1a1d;--orange-primary:#f97316;--orange-light:#fb923c;--orange-glow:rgba(249,115,22,.12);--orange-border:rgba(249,115,22,.25);--text-primary:#fafafa;--text-secondary:#a1a1aa;--text-muted:#52525b;--green:#22c55e;--green-muted:rgba(34,197,94,.15);--red:#ef4444;--red-muted:rgba(239,68,68,.15);--yellow:#eab308;--yellow-muted:rgba(234,179,8,.15);--blue:#38bdf8;--blue-muted:rgba(56,189,248,.08);--border-subtle:rgba(255,255,255,.06);--mono:'JetBrains Mono',monospace}*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Inter',-apple-system,BlinkMacSystemFont,sans-serif;background:var(--bg-primary);color:var(--text-primary);line-height:1.6;min-height:100vh}body::before{content:'';position:fixed;inset:0;pointer-events:none;background-image:linear-gradient(rgba(249,115,22,.015) 1px,transparent 1px),linear-gradient(90deg,rgba(249,115,22,.015) 1px,transparent 1px);background-size:48px 48px;z-index:0}.container{max-width:680px;margin:0 auto;padding:24px 16px 60px;position:relative;z-index:1}.header{text-align:center;margin-bottom:28px}.nav-back{display:inline-block;font-size:12px;color:var(--text-muted);text-decoration:none;margin-bottom:12px;letter-spacing:1px;transition:color .2s}.nav-back:hover{color:var(--orange-primary)}.logo-container{position:relative;display:inline-block;margin-bottom:6px}.logo{font-size:32px;font-weight:300;letter-spacing:16px;padding-left:16px;color:var(--text-primary);position:relative;z-index:1}.logo span{background:linear-gradient(135deg,var(--orange-primary) 0%,var(--orange-light) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;font-weight:600}.logo-whisper{font-size:11px;font-weight:400;letter-spacing:8px;padding-left:8px;margin-top:2px;text-transform:lowercase;background:linear-gradient(180deg,rgba(161,161,170,.6) 0%,rgba(82,82,91,.2) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.logo-glow{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:180px;height:50px;background:radial-gradient(ellipse,rgba(249,115,22,.3) 0%,transparent 70%);filter:blur(20px);z-index:0}.logo-badge{display:inline-block;font-size:11px;font-weight:600;padding:4px 10px;border-radius:6px;background:rgba(34,197,94,.15);border:1px solid rgba(34,197,94,.3);color:var(--green);letter-spacing:1px;font-family:var(--mono);margin-top:8px}.header-sub{font-size:13px;color:var(--text-muted);letter-spacing:1px;margin-top:4px}.live-strip{display:flex;align-items:center;justify-content:center;gap:16px;margin-top:12px;font-size:11px;font-family:var(--mono);color:var(--text-muted);flex-wrap:wrap}.live-dot{width:6px;height:6px;border-radius:50%;background:var(--green);display:inline-block;animation:pulse-dot 2s ease infinite}@keyframes pulse-dot{0%,100%{opacity:1}50%{opacity:.4}}.live-price{color:var(--text-secondary)}.cln-banner{background:var(--blue-muted);border:1px solid rgba(56,189,248,.25);border-radius:12px;padding:16px 20px;text-align:center;margin-bottom:24px}.cln-title{font-size:18px;font-weight:700;color:var(--blue);margin-bottom:4px;font-family:var(--mono)}.cln-sub{font-size:12px;color:#7dd3fc;line-height:1.5}.cln-maturity{display:inline-block;margin-top:8px;font-size:10px;font-family:var(--mono);color:var(--text-muted);padding:3px 10px;border-radius:20px;background:rgba(255,255,255,.03);border:1px solid var(--border-subtle)}.scenarios-section{margin-bottom:24px}.scenarios-row{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}@media(max-width:500px){.scenarios-row{grid-template-columns:repeat(2,1fr)}}.scenario-card{padding:16px 12px 14px;border-radius:12px;border:1.5px solid var(--border-subtle);background:var(--bg-card);cursor:pointer;transition:all .25s ease;text-align:center;user-select:none;position:relative}.scenario-card:hover{border-color:rgba(255,255,255,.12);background:var(--bg-elevated);transform:translateY(-2px)}.scenario-card.active{border-color:var(--orange-primary);background:var(--orange-glow);box-shadow:0 0 20px rgba(249,115,22,.1)}.scenario-icon{font-size:22px;margin-bottom:4px}.scenario-name{font-size:12px;font-weight:600;letter-spacing:.5px;margin-bottom:4px}.scenario-price{font-size:15px;font-weight:700;font-family:var(--mono);color:var(--orange-light)}.scenario-mnav{font-size:10px;color:var(--text-muted);font-family:var(--mono);margin-top:4px}.hero{text-align:center;padding:28px 20px;margin-bottom:20px;background:linear-gradient(180deg,rgba(249,115,22,.04) 0%,transparent 100%);border-radius:20px;border:1px solid rgba(249,115,22,.1)}.hero-label{font-size:10px;letter-spacing:3px;color:var(--text-muted);margin-bottom:6px;font-weight:500}.hero-price{font-size:64px;font-weight:700;font-family:var(--mono);line-height:1;margin-bottom:8px;transition:color .3s}.hero-price.positive{color:var(--green)}.hero-price.negative{color:var(--red)}.hero-price.neutral{color:var(--text-primary)}.hero-usd{font-size:18px;font-family:var(--mono);color:var(--text-secondary);margin-bottom:6px}.hero-change{font-size:16px;font-weight:600;font-family:var(--mono);margin-bottom:4px}.hero-change.up{color:var(--green)}.hero-change.down{color:var(--red)}.hero-vs{font-size:11px;color:var(--text-muted)}.hero-implied{margin-top:10px;font-size:12px;font-family:var(--mono);color:var(--text-secondary);padding:6px 14px;border-radius:20px;background:rgba(255,255,255,.03);border:1px solid var(--border-subtle);display:inline-block}.hero-implied em{font-style:normal;color:var(--orange-primary);font-weight:600}.narrative{background:var(--bg-card);border:1px solid var(--border-subtle);border-radius:14px;padding:20px;margin-bottom:20px}.narrative-title{font-size:14px;font-weight:600;margin-bottom:12px;display:flex;align-items:center;gap:8px}.narrative-body{display:flex;flex-direction:column;gap:10px}.narr-item{display:flex;align-items:flex-start;gap:10px;padding:10px 14px;border-radius:10px;font-size:13px;line-height:1.5}.narr-item.green{background:var(--green-muted);border:1px solid rgba(34,197,94,.2);color:#86efac}.narr-item.red{background:var(--red-muted);border:1px solid rgba(239,68,68,.2);color:#fca5a5}.narr-item.amber{background:var(--yellow-muted);border:1px solid rgba(234,179,8,.2);color:#fde68a}.narr-item.info{background:var(--blue-muted);border:1px solid rgba(56,189,248,.2);color:#7dd3fc}.narr-item.neutral{background:rgba(255,255,255,.03);border:1px solid var(--border-subtle);color:var(--text-secondary)}.narr-icon{font-size:16px;flex-shrink:0;margin-top:1px}.narr-text strong{color:var(--text-primary)}.metrics-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(100px,1fr));gap:8px;margin-bottom:20px}.metric-card{background:var(--bg-card);border:1px solid var(--border-subtle);border-radius:10px;padding:12px 10px;text-align:center}.metric-label{font-size:8px;letter-spacing:1.5px;color:var(--text-muted);margin-bottom:4px;font-weight:600}.metric-value{font-size:17px;font-weight:700;font-family:var(--mono);line-height:1.2}.metric-value.good{color:var(--green)}.metric-value.warn{color:var(--yellow)}.metric-value.danger{color:var(--red)}.collapse-section{margin-bottom:12px}.collapse-section summary{display:flex;align-items:center;gap:8px;padding:14px 16px;background:var(--bg-card);border:1px solid var(--border-subtle);border-radius:12px;cursor:pointer;font-size:13px;font-weight:600;color:var(--text-secondary);letter-spacing:.5px;transition:all .2s;list-style:none;user-select:none}.collapse-section summary::-webkit-details-marker{display:none}.collapse-section summary:hover{border-color:rgba(255,255,255,.12);color:var(--text-primary)}.collapse-section[open] summary{border-radius:12px 12px 0 0;border-bottom-color:transparent;color:var(--orange-primary)}.collapse-body{padding:16px;background:var(--bg-card);border:1px solid var(--border-subtle);border-top:none;border-radius:0 0 12px 12px}.controls-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:16px}@media(max-width:500px){.controls-grid{grid-template-columns:1fr}}.control-card{background:var(--bg-secondary);border:1px solid var(--border-subtle);border-radius:10px;padding:14px}.control-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.control-label{font-size:10px;letter-spacing:1.5px;color:var(--text-muted);font-weight:600}.control-value{font-size:18px;font-weight:700;font-family:var(--mono);color:var(--orange-light)}input[type="range"]{-webkit-appearance:none;width:100%;height:6px;border-radius:3px;background:#333;outline:none;cursor:pointer}input[type="range"]::-webkit-slider-thumb{-webkit-appearance:none;width:20px;height:20px;border-radius:50%;background:var(--orange-primary);box-shadow:0 0 10px rgba(249,115,22,.4);cursor:grab}input[type="range"]::-moz-range-thumb{width:20px;height:20px;border-radius:50%;background:var(--orange-primary);border:none;box-shadow:0 0 10px rgba(249,115,22,.4);cursor:grab}.slider-labels{display:flex;justify-content:space-between;font-size:9px;color:#444;font-family:var(--mono);margin-top:4px}.mnav-presets{display:flex;gap:4px;margin-top:8px}.mnav-btn{flex:1;padding:4px 0;border-radius:6px;border:1px solid var(--border-subtle);background:transparent;color:var(--text-muted);font-size:10px;font-family:var(--mono);cursor:pointer;transition:all .2s}.mnav-btn:hover,.mnav-btn.active{border-color:var(--orange-primary);color:var(--orange-primary);background:var(--orange-glow)}.waterfall{display:flex;align-items:center;gap:4px;overflow-x:auto;padding:12px;scrollbar-width:none}.waterfall::-webkit-scrollbar{display:none}.wf-step{flex:0 0 auto;text-align:center;padding:8px 14px;border-radius:8px;min-width:90px}.wf-step.btc-val{background:rgba(249,115,22,.08);border:1px solid rgba(249,115,22,.2)}.wf-step.claim{background:var(--red-muted);border:1px solid rgba(239,68,68,.2)}.wf-step.nav{background:var(--green-muted);border:1px solid rgba(34,197,94,.2)}.wf-step.shares{background:rgba(255,255,255,.03);border:1px solid var(--border-subtle)}.wf-step.result{background:rgba(249,115,22,.12);border:1px solid var(--orange-border)}.wf-label{font-size:8px;letter-spacing:1px;color:var(--text-muted);margin-bottom:2px}.wf-value{font-size:12px;font-weight:700;font-family:var(--mono)}.wf-arrow{flex:0 0 auto;font-size:14px;color:var(--text-muted)}.matrix-table{width:100%;border-collapse:collapse;font-family:var(--mono);font-size:11px}.matrix-table th{padding:8px 6px;font-size:10px;font-weight:600;color:var(--text-muted);border-bottom:1px solid var(--border-subtle);white-space:nowrap}.matrix-table td{padding:8px 6px;text-align:center;border-bottom:1px solid rgba(255,255,255,.02);white-space:nowrap}.matrix-table .row-label{text-align:left;color:var(--text-muted);font-weight:600}.matrix-cell-green{color:var(--green)}.matrix-cell-lightgreen{color:rgba(34,197,94,.6)}.matrix-cell-red{color:var(--red)}.matrix-cell-lightred{color:rgba(239,68,68,.6)}.matrix-cell-current{background:var(--orange-glow);border-radius:4px;font-weight:700;color:var(--orange-light)}.cap-structure{margin-top:8px}.cap-row{display:flex;justify-content:space-between;align-items:center;padding:8px 12px;border-radius:8px;margin-bottom:4px;font-size:12px;font-family:var(--mono)}.cap-row.debt{background:var(--red-muted);border:1px solid rgba(239,68,68,.15)}.cap-row-label{color:var(--text-secondary);font-size:11px}.cap-row-value{font-weight:700}.cap-row.debt .cap-row-value{color:var(--red)}.cap-total{display:flex;justify-content:space-between;padding:10px 12px;border-top:1px solid var(--border-subtle);margin-top:8px;font-size:12px;font-family:var(--mono)}.cap-total-label{color:var(--text-secondary);font-weight:600}.cap-total-value{color:var(--orange-primary);font-weight:700}.contrast-title{font-size:12px;font-weight:600;letter-spacing:1px;color:var(--text-muted);margin-bottom:14px;text-align:center}.contrast-row{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}.contrast-item{text-align:center;padding:14px 8px;background:rgba(255,255,255,.02);border:1px solid var(--border-subtle);border-radius:10px}.contrast-company{font-size:10px;font-weight:600;letter-spacing:1px;color:var(--text-muted);margin-bottom:6px}.contrast-value{font-size:24px;font-weight:700;font-family:var(--mono)}.contrast-label{font-size:10px;color:var(--text-muted);margin-top:4px}.footer{text-align:center;margin-top:40px;padding-top:20px;border-top:1px solid var(--border-subtle);font-size:11px;color:var(--text-muted);line-height:1.8}.footer a{color:var(--orange-primary);text-decoration:none}.footer a:hover{text-decoration:underline}.footer-formula{font-family:var(--mono);font-size:10px;color:#333;margin-top:8px}.scenario-section-label{display:flex;align-items:center;gap:10px;margin-bottom:10px;font-size:9px;font-weight:500;letter-spacing:1.5px;color:var(--text-muted);padding-left:2px}.section-pill{display:inline-block;padding:4px 12px;border-radius:20px;background:var(--orange-glow);border:1px solid var(--orange-border);color:var(--orange-primary);font-size:10px;font-weight:700;letter-spacing:1.5px;white-space:nowrap}#scenarioBarForward .scenario-card{border-left:3px solid var(--orange-primary)}.scenario-card.forward-card{border-left:3px solid var(--orange-primary)}.scenario-card.forward-card.active{border-left:3px solid var(--orange-primary)}.loading-screen{position:fixed;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;background:var(--bg-primary);z-index:999}.loading-spinner{width:32px;height:32px;border:3px solid #222;border-top-color:var(--green);border-radius:50%;animation:spin .8s linear infinite;margin-bottom:12px}@keyframes spin{to{transform:rotate(360deg)}}.loading-text{font-size:12px;color:var(--text-muted);letter-spacing:2px}@media(max-width:768px){.hero-price{font-size:48px}}@media(max-width:480px){.hero-price{font-size:36px}.control-value{font-size:16px}.logo{font-size:24px;letter-spacing:10px;padding-left:10px}.contrast-row{grid-template-columns:1fr}}
    </style>
    <script defer src="/_vercel/insights/script.js"></script>
    <script defer src="/_vercel/speed-insights/script.js"></script>
</head>
<body>
<div class="loading-screen" id="loadingScreen"><div class="loading-spinner"></div><div class="loading-text">LOADING LIVE DATA</div></div>
<div class="container" id="app" style="display:none">
    <div class="header">
        <a href="/modeler" class="nav-back">&larr; modelers</a>
        <div class="logo-container"><div class="logo-glow"></div><div class="logo"><span>CEBE</span></div><p class="logo-whisper">tracker</p></div>
        <div class="logo-badge">&#127463;&#127479; ORANJEBTC MODELER</div>
        <div class="header-sub" id="headerSub">LATAM&#8217;s Largest Bitcoin Treasury &middot; B3: OBTC3</div>
        <div class="live-strip" id="liveStrip"><span><span class="live-dot"></span> Live Data</span><span class="live-price" id="liveBtcDisplay">BTC $&mdash;</span><span class="live-price" id="liveDataDate">&mdash;</span></div>
    </div>
    <div class="cln-banner">
        <div class="cln-title" id="clnTitle">~6% DRAG</div>
        <div class="cln-sub">$23M zero-coupon convertible note creates modest drag on common equity.<br>No interest payments. Drag compresses as BTC rises.</div>
        <div class="cln-maturity">MATURITY: SEP 2030 &middot; CONVERSION: $3.30/SHARE</div>
    </div>
    <div class="scenarios-section"><div class="scenario-section-label"><span class="section-pill">&#9889; NOW</span> WHAT IF BTC WERE AT THIS PRICE TODAY</div><div class="scenarios-row" id="scenarioBarNow"></div></div>
    <div class="scenarios-section"><div class="scenario-section-label"><span class="section-pill">&#8594; FORWARD</span> 5-YEAR PROJECTIONS &middot; NOTE MATURITY SEP 2030</div><div class="scenarios-row" id="scenarioBarForward"></div></div>
    <div class="hero">
        <div class="hero-label" id="heroLabel">MODELED SHARE PRICE</div>
        <div class="hero-price neutral" id="heroPrice">&mdash;</div>
        <div class="hero-usd" id="heroUsd"></div>
        <div class="hero-change" id="heroChange">&mdash;</div>
        <div class="hero-vs" id="heroVs">vs current market price</div>
        <div class="hero-implied" id="heroImplied" style="display:none">Market implies <em id="impliedMnavVal">&mdash;</em> mNAV</div>
    </div>
    <div class="narrative" id="narrativePanel"><div class="narrative-title">&#128269; What happens here</div><div class="narrative-body" id="narrativeBody"></div></div>
    <div class="metrics-grid" id="metricsGrid"></div>
    <details class="collapse-section"><summary>&#9881; Adjust Inputs</summary><div class="collapse-body"><div class="controls-grid"><div class="control-card"><div class="control-header"><span class="control-label">BTC PRICE</span><span class="control-value" id="btcPriceDisplay">$&mdash;</span></div><input type="range" id="btcSlider" min="0" max="1000" value="500"><div class="slider-labels"><span>$10K</span><span>$1M</span></div></div><div class="control-card"><div class="control-header"><span class="control-label">mNAV MULTIPLE</span><span class="control-value" id="mnavDisplay">1.00&times;</span></div><input type="range" id="mnavSlider" min="30" max="400" value="100"><div class="mnav-presets" id="mnavPresets"></div></div></div></div></details>
    <details class="collapse-section"><summary>&#128256; Value Waterfall</summary><div class="collapse-body" style="padding:0;"><div class="waterfall" id="waterfall"></div></div></details>
    <details class="collapse-section"><summary>&#127970; Capital Structure</summary><div class="collapse-body" id="capStructureBody"></div></details>
    <details class="collapse-section"><summary>&#127919; Price Sensitivity Matrix</summary><div class="collapse-body" style="padding:0;"><div style="overflow-x:auto;"><table class="matrix-table" id="matrixTable"></table></div></div></details>
    <details class="collapse-section"><summary>&#9878; How Drag Compares</summary><div class="collapse-body" id="contrastBody"></div></details>
    <div class="footer">
        <p>CEBE Framework by <a href="https://x.com/chcbearsfan" target="_blank">&#64;chcbearsfan</a> &middot; <a href="/">cebetracker.io</a> &middot; <a href="https://x.com/chcbearsfan/status/2014767364819063207" target="_blank">Read the Framework</a></p>
        <p style="margin-top:4px">Not financial advice &middot; Data updates after each filing</p>
        <p class="footer-formula">CEBE = (Total BTC &minus; Claims BTC) &divide; Shares &middot; Price = CEBE &times; BTC Price &times; mNAV</p>
    </div>
</div>
<script>
const COMPANY={name:'OranjeBTC',flag:'&#127463;&#127479;',tickers:'B3: OBTC3',tagline:"LATAM's Largest Bitcoin Treasury",currency:'BRL',currencySymbol:'R$',defaults:{btc_holdings:3722.3,shares:155300500,stock_price_local:6.65,fx_rate:5.78}};
const DEBT={convert_usd:23000000,coupon_rate:0,maturity:'Sep 2030',conversion_price_usd:3.30,conversion_shares:Math.round(23000000/3.30)};
const SHEET_ID='1BNsCWGVU08PDinDcfzJccqcuj9_KrK1VZGETErzBZvg';
const SNAPSHOTS_GID='771405586';
const SCENARIOS_NOW=[{id:'crash',icon:'&#128128;',name:'Crash',btc:25000,mnav:0.5,tag:'NOW'},{id:'current',icon:'&#128205;',name:'Current',btc:null,mnav:1.0,tag:'NOW'},{id:'bull',icon:'&#128081;',name:'Bull',btc:150000,mnav:1.5,tag:'NOW'}];
const SCENARIOS_FORWARD=[{id:'siege',icon:'&#127984;',name:'Siege',btc:50000,mnav:0.7,tag:'5Y',desc:'0.7\u00d7 mNAV \u00b7 5Y',forward:true},{id:'maturity',icon:'&#9728;',name:'Maturity',btc:200000,mnav:1.0,tag:'5Y',desc:'Note expires \u00b7 5Y',forward:true},{id:'moon',icon:'&#128640;',name:'Moon',btc:500000,mnav:2.0,tag:'5Y',desc:'Zero drag \u00b7 5Y',forward:true}];
const SCENARIOS=[...SCENARIOS_NOW,...SCENARIOS_FORWARD];
const MNAV_PRESETS=[0.5,0.75,1.0,1.5,2.0,3.0];
const MATRIX_BTC=[25000,50000,75000,100000,150000,200000,300000,500000,1000000];
const MATRIX_MNAVS=[0.5,0.75,1.0,1.5,2.0,3.0];
let btcPrice=97000,mnavMultiple=1.0,activeScenario='current',liveBtcPrice=null,liveFxRate=COMPANY.defaults.fx_rate,loadedData={};
const $=id=>document.getElementById(id);
const fmt=n=>Math.round(n).toLocaleString('en-US');
const fmtB=n=>n>=1e9?'$'+(n/1e9).toFixed(1)+'B':n>=1e6?'$'+(n/1e6).toFixed(0)+'M':'$'+fmt(n);
const fmtPrice=p=>{if(p>=1e6)return '$'+(p/1e6).toFixed(1)+'M';if(p>=1000)return '$'+fmt(p);if(p>=0.01)return '$'+p.toFixed(2);return '$0.00'};
const fmtPct=(p,dec=1)=>(p*100).toFixed(dec)+'%';
const fmtSats=s=>fmt(Math.round(s));
function sliderToBtc(val){const a=Math.log10(10000),b=Math.log10(1000000);return Math.round(Math.pow(10,a+(val/1000)*(b-a)))}
function btcToSlider(btc){const a=Math.log10(10000),b=Math.log10(1000000);return Math.round(((Math.log10(Math.max(10000,btc))-a)/(b-a))*1000)}
function getData(){return{btcHoldings:loadedData.btc_holdings||COMPANY.defaults.btc_holdings,shares:loadedData.shares||COMPANY.defaults.shares,stockLocal:loadedData.stock_price_local||COMPANY.defaults.stock_price_local,fxRate:liveFxRate||COMPANY.defaults.fx_rate,snapshotDate:loadedData.snapshot_date||null}}
function parseCSVLine(line){const r=[];let c='',q=false;for(const ch of line){if(ch==='"')q=!q;else if(ch===','&&!q){r.push(c);c=''}else c+=ch}r.push(c);return r}
function parseCSV(text){const lines=text.split('\n');const headers=parseCSVLine(lines[0]);return lines.slice(1).filter(l=>l.trim()).map(l=>{const vals=parseCSVLine(l);const row={};headers.forEach((h,i)=>{row[h.replace(/"/g,'').trim()]=vals[i]?.replace(/"/g,'').trim()||''});return row})}
function compute(btcH,shares,btcP,mnav){
    const claimsBtc=DEBT.convert_usd/btcP;
    const drag=btcH>0?claimsBtc/btcH:0;
    const commonOwnership=Math.max(0,1-drag);
    const bpsBtc=shares>0?btcH/shares:0;
    const bpsSats=Math.round(bpsBtc*1e8);
    const commonBtc=Math.max(0,btcH-claimsBtc);
    const cebeBtc=shares>0?commonBtc/shares:0;
    const cebeSats=Math.round(cebeBtc*1e8);
    const navUsd=commonBtc*btcP;
    const navPerShare=shares>0?navUsd/shares:0;
    const modeledUsd=navPerShare*mnav;
    const amplification=commonOwnership>0?1/commonOwnership:Infinity;
    const breakEven=btcH>0?DEBT.convert_usd/btcH:0;
    return{bpsBtc,bpsSats,cebeBtc,cebeSats,claimsBtc,drag,commonOwnership,amplification,navUsd,navPerShare,modeledUsd,breakEven,claimsUsd:DEBT.convert_usd}
}
async function loadData(){
    try{
        const btcRes=await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd,brl').then(r=>r.json()).catch(()=>null);
        if(btcRes&&btcRes.bitcoin){liveBtcPrice=btcRes.bitcoin.usd;if(btcRes.bitcoin.brl&&btcRes.bitcoin.usd)liveFxRate=btcRes.bitcoin.brl/btcRes.bitcoin.usd}
        const sheetText=await fetch(`https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:csv&gid=${SNAPSHOTS_GID}`).then(r=>r.text()).catch(()=>null);
        if(sheetText){const rows=parseCSV(sheetText);let best=null;rows.forEach(r=>{if(r.ticker==='OBTC3'&&(!r.status||r.status.toLowerCase()==='live')){if(!best||r.snapshot_date>best.snapshot_date)best=r}});if(best){loadedData={btc_holdings:parseFloat(best.btc_holdings)||COMPANY.defaults.btc_holdings,shares:parseFloat(best.shares_outstanding)||COMPANY.defaults.shares,snapshot_date:best.snapshot_date||null}}}
        btcPrice=liveBtcPrice||97000;SCENARIOS_NOW.find(s=>s.id==='current').btc=btcPrice;
        $('loadingScreen').style.display='none';$('app').style.display='block';
        $('headerSub').innerHTML=COMPANY.tagline+' &middot; '+COMPANY.tickers;
        buildScenarioBar();buildMnavPresets();syncSliders();render()
    }catch(err){console.error('Load failed:',err);$('loadingScreen').innerHTML='<div style="text-align:center;color:#a1a1aa;font-size:13px"><p style="margin-bottom:12px">Failed to load data</p><p style="font-size:11px;color:#52525b">'+err.message+'</p><p style="margin-top:12px"><a href="/modeler" style="color:#f97316">&larr; Back to modelers</a></p></div>'}
}
function render(){
    const d=getData();const r=compute(d.btcHoldings,d.shares,btcPrice,mnavMultiple);
    renderHero(r,d);renderNarrative(r,d);renderMetrics(r,d);renderWaterfall(r,d);renderCapStructure(r,d);renderMatrix(d);renderContrast(r);
    $('clnTitle').textContent=fmtPct(r.drag,1)+' DRAG';
    $('liveBtcDisplay').textContent='BTC '+fmtPrice(liveBtcPrice||btcPrice);
    $('liveDataDate').textContent=d.snapshotDate?'Data: '+d.snapshotDate:'Data: Feb 2026';
    updateSliderFills()
}
function renderHero(r,d){
    const priceUsd=r.modeledUsd,priceLocal=priceUsd*d.fxRate,sym=COMPANY.currencySymbol,el=$('heroPrice');
    $('heroLabel').innerHTML='MODELED ORANJEBTC SHARE PRICE';
    if(priceUsd<=0){el.textContent=sym+'0.00';el.className='hero-price negative';$('heroUsd').textContent='';$('heroChange').textContent='';$('heroVs').textContent='';$('heroImplied').style.display='none';return}
    el.innerHTML=sym+priceLocal.toFixed(2);$('heroUsd').innerHTML='&#8776; '+fmtPrice(priceUsd)+' USD';
    const marketLocal=d.stockLocal;
    if(marketLocal>0){const chg=priceLocal-marketLocal,chgPct=(chg/marketLocal)*100,sign=chg>=0?'+':'';$('heroChange').textContent=sign+chgPct.toFixed(1)+'%';$('heroChange').className='hero-change '+(chg>=0?'up':'down');el.className='hero-price '+(chgPct>5?'positive':chgPct<-5?'negative':'neutral');$('heroVs').innerHTML='vs market '+sym+marketLocal.toFixed(2)}
    else{$('heroChange').textContent='';el.className='hero-price neutral';$('heroVs').textContent=''}
    if(marketLocal>0&&r.navPerShare>0){const marketUsd=marketLocal/d.fxRate,impliedMnav=marketUsd/r.navPerShare;$('impliedMnavVal').textContent=impliedMnav.toFixed(2)+'\u00d7';$('heroImplied').style.display='inline-block'}else{$('heroImplied').style.display='none'}
}
function renderNarrative(r,d){
    const items=[];const scenarioObj=SCENARIOS.find(s=>s.id===activeScenario);const scenarioName=scenarioObj?scenarioObj.name:'Custom';
    document.querySelector('.narrative-title').innerHTML='&#128269; '+scenarioName+' &mdash; '+fmtPrice(btcPrice)+' BTC';
    if(r.drag<0.03)items.push({cls:'green',icon:'&#9989;',text:'<strong>Near-zero drag at '+fmtPct(r.drag)+'.</strong> The $23M convertible note is negligible against '+fmt(d.btcHoldings)+' BTC. Common equity owns '+fmtPct(r.commonOwnership)+' of the Bitcoin on the balance sheet.'});
    else if(r.drag<0.15)items.push({cls:'info',icon:'&#128202;',text:'<strong>Low drag at '+fmtPct(r.drag)+'.</strong> The $23M zero-coupon convertible note claims '+r.claimsBtc.toFixed(1)+' BTC at this price. Common equity owns '+fmtPct(r.commonOwnership)+' of the '+fmt(d.btcHoldings)+' BTC stack. No interest payments eroding value.'});
    else if(r.drag<0.5)items.push({cls:'amber',icon:'&#9888;',text:'<strong>Elevated drag at '+fmtPct(r.drag)+'.</strong> At this BTC price, the $23M note claims '+r.claimsBtc.toFixed(1)+' BTC. Common equity ownership is reduced to '+fmtPct(r.commonOwnership)+'. Drag compresses if BTC recovers.'});
    else items.push({cls:'red',icon:'&#128680;',text:'<strong>Critical drag at '+fmtPct(r.drag)+'.</strong> Senior claims consume '+r.claimsBtc.toFixed(1)+' of '+fmt(d.btcHoldings)+' BTC. Common equity owns only '+fmtPct(r.commonOwnership)+'. Break-even BTC price: '+fmtPrice(r.breakEven)+'.'});
    items.push({cls:'green',icon:'&#128176;',text:'<strong>Zero coupon = no ongoing cost.</strong> Unlike preferred dividends that constantly dilute, this convertible note has 0% interest. The $23M claim is static. No dividend drag, no cash drain, no share dilution from payments. Maturity: Sep 2030.'});
    if(r.amplification>1.01)items.push({cls:'neutral',icon:'&#9878;',text:'<strong>Amplification: '+r.amplification.toFixed(2)+'&times;</strong> Common equity gets '+((r.amplification-1)*100).toFixed(0)+'% extra leverage on BTC price movements. This works both ways: amplified gains in a bull run, amplified losses in a downturn.'});
    const stockUsd=d.stockLocal/d.fxRate;
    if(stockUsd>0){const convRatio=DEBT.conversion_price_usd/stockUsd;if(convRatio<1.2)items.push({cls:'amber',icon:'&#9888;',text:'<strong>Approaching conversion zone.</strong> Stock is near the $3.30 conversion price. If converted, ~'+fmt(DEBT.conversion_shares)+' new shares would be issued, but $23M in claims would be removed. Net effect depends on share price vs conversion economics.'});else items.push({cls:'info',icon:'&#128161;',text:'<strong>Conversion is '+convRatio.toFixed(1)+'&times; away.</strong> Stock trades at ~$'+stockUsd.toFixed(2)+' vs $3.30 conversion price. The convertible note behaves as pure debt at these levels. If price rises toward conversion, the note could convert into ~'+fmt(DEBT.conversion_shares)+' shares, eliminating the $23M claim.'})}
    items.push({cls:'neutral',icon:'&#127463;&#127479;',text:"<strong>BRL/USD dynamics.</strong> The convertible note is USD-denominated while shares trade in BRL. A weakening BRL increases the BTC price in BRL terms (good for stock price) but doesn't change the USD claim. FX adds a second variable beyond just BTC price."});
    if(activeScenario==='crash')items.push({cls:'red',icon:'&#128680;',text:'<strong>Break-even: '+fmtPrice(r.breakEven)+' BTC.</strong> Below this price, senior claims exceed total BTC value and common equity is theoretically worthless. However, the zero-coupon note has no call provisions and matures in Sep 2030. No forced liquidation unless the company defaults.'});
    if(activeScenario==='moon')items.push({cls:'green',icon:'&#128640;',text:'<strong>Drag is negligible at '+fmtPct(r.drag)+'.</strong> At '+fmtPrice(btcPrice)+', the $23M note is a rounding error against a '+fmtB(d.btcHoldings*btcPrice)+' BTC reserve. OranjeBTC effectively behaves as a zero-drag company. CEBE converges to BPS.'});
    if(activeScenario==='maturity')items.push({cls:'green',icon:'&#9728;',text:'<strong>Note matures Sep 2030.</strong> At this 5-year horizon, the $23M convertible either converts to shares (removing the claim) or is repaid at maturity. Either way, drag goes to zero and CEBE equals BPS going forward.'});
    if(activeScenario==='siege')items.push({cls:'amber',icon:'&#127984;',text:'<strong>5-year siege scenario.</strong> Even at $50K BTC with 0.7&times; mNAV, the note matures in 2030. OranjeBTC must repay $23M or allow conversion. At $50K, the company holds '+fmtB(d.btcHoldings*50000)+' in BTC reserves. The $23M claim is manageable but drag sits at '+fmtPct(DEBT.convert_usd/50000/d.btcHoldings)+'.'});
    $('narrativeBody').innerHTML=items.map(i=>'<div class="narr-item '+i.cls+'"><span class="narr-icon">'+i.icon+'</span><span>'+i.text+'</span></div>').join('')
}
function renderMetrics(r,d){
    const dragCls=r.drag<0.05?'good':r.drag<0.2?'warn':'danger';
    const metrics=[{label:'CEBE',value:fmtSats(r.cebeSats)+' sats',cls:''},{label:'BPS',value:fmtSats(r.bpsSats)+' sats',cls:''},{label:'DRAG',value:fmtPct(r.drag),cls:dragCls},{label:'COMMON OWNS',value:fmtPct(r.commonOwnership),cls:r.commonOwnership>0.9?'good':''},{label:'BTC HOLDINGS',value:fmt(d.btcHoldings),cls:''},{label:'AMPLIFICATION',value:r.amplification.toFixed(2)+'&times;',cls:''},{label:'BREAK-EVEN',value:fmtPrice(r.breakEven),cls:''},{label:'mNAV',value:mnavMultiple.toFixed(2)+'&times;',cls:''}];
    $('metricsGrid').innerHTML=metrics.map(m=>'<div class="metric-card"><div class="metric-label">'+m.label+'</div><div class="metric-value '+m.cls+'">'+m.value+'</div></div>').join('')
}
function renderWaterfall(r,d){
    const sym=COMPANY.currencySymbol,navLocal=r.navPerShare*d.fxRate,priceLocal=r.modeledUsd*d.fxRate,grossUsd=d.btcHoldings*btcPrice;
    $('waterfall').innerHTML='<div class="wf-step btc-val"><div class="wf-label">BTC RESERVE</div><div class="wf-value">'+fmtB(grossUsd)+'</div></div><span class="wf-arrow">&minus;</span><div class="wf-step claim"><div class="wf-label">CONVERT NOTE</div><div class="wf-value" style="color:var(--red)">'+fmtB(DEBT.convert_usd)+'</div></div><span class="wf-arrow">=</span><div class="wf-step nav"><div class="wf-label">NAV</div><div class="wf-value">'+fmtB(r.navUsd)+'</div></div><span class="wf-arrow">&#247;</span><div class="wf-step shares"><div class="wf-label">SHARES</div><div class="wf-value">'+(d.shares/1e6).toFixed(1)+'M</div></div><span class="wf-arrow">=</span><div class="wf-step shares"><div class="wf-label">NAV/SHARE</div><div class="wf-value">'+sym+navLocal.toFixed(2)+'</div></div><span class="wf-arrow">&times;</span><div class="wf-step shares"><div class="wf-label">mNAV</div><div class="wf-value">'+mnavMultiple.toFixed(2)+'&times;</div></div><span class="wf-arrow">=</span><div class="wf-step result"><div class="wf-label">PRICE</div><div class="wf-value">'+sym+priceLocal.toFixed(2)+'</div></div>'
}
function renderCapStructure(r,d){
    const btcH=d.btcHoldings,stockUsd=d.stockLocal/d.fxRate;
    $('capStructureBody').innerHTML='<div class="cap-structure"><div class="cap-row debt"><span class="cap-row-label">Zero-Coupon Convertible (Sep 2030)</span><span class="cap-row-value">'+fmtB(DEBT.convert_usd)+'</span></div><div class="cap-row debt"><span class="cap-row-label">Claims in BTC terms</span><span class="cap-row-value">'+r.claimsBtc.toFixed(1)+' BTC</span></div><div class="cap-total"><span class="cap-total-label">NET SENIOR CLAIMS</span><span class="cap-total-value">'+fmtB(DEBT.convert_usd)+'</span></div></div><div style="margin-top:16px;font-size:12px;color:var(--text-muted);line-height:1.6"><strong style="color:var(--text-secondary)">Key details:</strong><br>&bull; Zero coupon: no interest payments, no cash drain, no share dilution from coupons<br>&bull; Maturity: September 2030 (4+ years remaining)<br>&bull; Conversion price: $3.30/share (currently '+(stockUsd>0?(DEBT.conversion_price_usd/stockUsd).toFixed(1):'?')+'&times; away)<br>&bull; If converted: removes $23M claim, adds ~'+fmt(DEBT.conversion_shares)+' shares<br>&bull; No call provisions: creditors cannot force early repayment<br>&bull; Drag at current BTC price: '+fmtPct(r.drag)+' ('+r.claimsBtc.toFixed(1)+' BTC of '+fmt(btcH)+')</div><div style="margin-top:16px"><div class="contrast-title">DRAG vs BTC PRICE</div><div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(80px,1fr));gap:6px">'+[25000,50000,75000,100000,150000,250000,500000].map(p=>{const d2=DEBT.convert_usd/p/btcH,cls=d2<0.05?'good':d2<0.15?'warn':'danger',isNear=Math.abs(p-btcPrice)<btcPrice*0.2;return '<div style="text-align:center;padding:8px 4px;border-radius:8px;'+(isNear?'background:var(--orange-glow);border:1px solid var(--orange-border)':'background:rgba(255,255,255,.02);border:1px solid var(--border-subtle)')+'"><div style="font-size:9px;color:var(--text-muted);font-family:var(--mono)">'+(p>=1e6?'$'+(p/1e6)+'M':'$'+(p/1e3)+'K')+'</div><div class="metric-value '+cls+'" style="font-size:14px">'+fmtPct(d2)+'</div></div>'}).join('')+'</div></div>'
}
function renderMatrix(d){
    const sym=COMPANY.currencySymbol;let html='<thead><tr><th>BTC &#8595; \\ mNAV &#8594;</th>';MATRIX_MNAVS.forEach(m=>{html+='<th>'+m.toFixed(m%1===0?0:2)+'&times;</th>'});html+='</tr></thead><tbody>';
    MATRIX_BTC.forEach(btcP=>{const r=compute(d.btcHoldings,d.shares,btcP,1.0);const label=btcP>=1e6?'$'+(btcP/1e6)+'M':'$'+(btcP/1e3)+'K';html+='<tr><td class="row-label">'+label+'</td>';MATRIX_MNAVS.forEach(m=>{const priceUsd=r.navPerShare*m,priceLocal=priceUsd*d.fxRate;const display=priceLocal>=100?sym+Math.round(priceLocal).toLocaleString():priceLocal>=1?sym+priceLocal.toFixed(2):priceLocal>=0.01?sym+priceLocal.toFixed(2):sym+'0.00';const marketUsd=d.stockLocal/d.fxRate;let cls='';if(marketUsd>0){const ratio=priceUsd/marketUsd;if(ratio>1.5)cls='matrix-cell-green';else if(ratio>1.1)cls='matrix-cell-lightgreen';else if(ratio<0.5)cls='matrix-cell-red';else if(ratio<0.9)cls='matrix-cell-lightred'}const btcClose=Math.abs(btcP-btcPrice)<btcPrice*0.25,mnavClose=Math.abs(m-mnavMultiple)<0.15;if(btcClose&&mnavClose)cls+=' matrix-cell-current';html+='<td class="'+cls+'">'+display+'</td>'});html+='</tr>'});
    html+='</tbody>';$('matrixTable').innerHTML=html
}
function renderContrast(r){
    $('contrastBody').innerHTML='<div class="contrast-title">DRAG COMPARISON AT '+fmtPrice(btcPrice)+' BTC</div><div class="contrast-row"><div class="contrast-item"><div class="contrast-company">ORANJEBTC</div><div class="contrast-value" style="color:var(--blue)">'+fmtPct(r.drag)+'</div><div class="contrast-label">owns '+fmtPct(r.commonOwnership)+'</div></div><div class="contrast-item"><div class="contrast-company">METAPLANET</div><div class="contrast-value" style="color:var(--yellow)">~14%</div><div class="contrast-label">owns ~86%</div></div><div class="contrast-item"><div class="contrast-company">STRATEGY</div><div class="contrast-value" style="color:var(--orange-light)">~27%</div><div class="contrast-label">owns ~73%</div></div></div><div style="margin-top:14px;font-size:12px;color:var(--text-muted);line-height:1.6"><strong style="color:var(--text-secondary)">What this means:</strong> OranjeBTC\'s drag is minimal compared to leveraged BTCTCs. The $23M zero-coupon note creates '+fmtPct(r.drag)+' drag at current prices, well below Strategy\'s ~27% and Metaplanet\'s ~14%. As BTC rises, OranjeBTC\'s drag compresses toward zero.<br><br><strong style="color:var(--text-secondary)">Key advantage:</strong> Zero coupon means no ongoing costs. Strategy pays ~$888M/yr in preferred dividends that dilute shares. Metaplanet services bond interest. OranjeBTC\'s only obligation is the $23M principal at maturity in 2030. Clean and simple.</div>'
}
function buildScenarioBar(){
    renderScenarioRow($('scenarioBarNow'),SCENARIOS_NOW,false);
    renderScenarioRow($('scenarioBarForward'),SCENARIOS_FORWARD,true);
}
function renderScenarioRow(container,scenarios,isForward){
    container.innerHTML=scenarios.map(s=>{const priceDisplay=s.btc?(s.btc>=1e6?'$'+(s.btc/1e6)+'M':'$'+(s.btc/1e3)+'K'):fmtPrice(btcPrice);const priceWithArrow=isForward&&s.btc?'&rarr; '+priceDisplay:priceDisplay;const tagHtml=s.tag?'<span style="position:absolute;top:6px;right:8px;font-size:8px;font-weight:700;letter-spacing:1px;color:var(--text-muted);font-family:var(--mono);">'+s.tag+'</span>':'';const descHtml=s.desc?'<div class="scenario-mnav">'+s.desc+'</div>':'<div class="scenario-mnav">'+s.mnav.toFixed(1)+'&times; mNAV</div>';const fwdClass=isForward?' forward-card':'';return '<div class="scenario-card'+fwdClass+' '+(s.id===activeScenario?'active':'')+'" data-scenario="'+s.id+'">'+tagHtml+'<div class="scenario-icon">'+s.icon+'</div><div class="scenario-name">'+s.name+'</div><div class="scenario-price">'+priceWithArrow+'</div>'+descHtml+'</div>'}).join('');
    container.querySelectorAll('.scenario-card').forEach(card=>{card.addEventListener('click',()=>{const id=card.dataset.scenario,scenario=SCENARIOS.find(s=>s.id===id);if(!scenario)return;activeScenario=id;btcPrice=scenario.btc||(liveBtcPrice||97000);mnavMultiple=scenario.mnav;syncSliders();buildScenarioBar();updateMnavPresets();render()})})
}
function buildMnavPresets(){
    $('mnavPresets').innerHTML=MNAV_PRESETS.map(m=>'<button class="mnav-btn '+(Math.abs(m-mnavMultiple)<0.01?'active':'')+'" data-mnav="'+m+'">'+m.toFixed(m%1===0?0:2)+'&times;</button>').join('');
    document.querySelectorAll('.mnav-btn').forEach(btn=>{btn.addEventListener('click',()=>{mnavMultiple=parseFloat(btn.dataset.mnav);$('mnavSlider').value=mnavMultiple*100;$('mnavDisplay').textContent=mnavMultiple.toFixed(2)+'\u00d7';activeScenario='';updateMnavPresets();buildScenarioBar();render()})})
}
function updateMnavPresets(){document.querySelectorAll('.mnav-btn').forEach(btn=>{btn.classList.toggle('active',Math.abs(parseFloat(btn.dataset.mnav)-mnavMultiple)<0.01)})}
function syncSliders(){$('btcSlider').value=btcToSlider(btcPrice);$('btcPriceDisplay').textContent=fmtPrice(btcPrice);$('mnavSlider').value=mnavMultiple*100;$('mnavDisplay').textContent=mnavMultiple.toFixed(2)+'\u00d7';updateMnavPresets()}
function updateSliderFills(){const b=$('btcSlider'),bp=(b.value/1000)*100;b.style.background='linear-gradient(90deg,var(--orange-primary) '+bp+'%,#333 '+bp+'%)';const m=$('mnavSlider'),mp=((m.value-30)/(400-30))*100;m.style.background='linear-gradient(90deg,var(--orange-primary) '+mp+'%,#333 '+mp+'%)'}
$('btcSlider').addEventListener('input',e=>{btcPrice=sliderToBtc(parseInt(e.target.value));$('btcPriceDisplay').textContent=fmtPrice(btcPrice);activeScenario='';buildScenarioBar();render()});
$('mnavSlider').addEventListener('input',e=>{mnavMultiple=parseInt(e.target.value)/100;$('mnavDisplay').textContent=mnavMultiple.toFixed(2)+'\u00d7';activeScenario='';updateMnavPresets();buildScenarioBar();render()});
document.addEventListener('keydown',e=>{if(e.target.tagName==='INPUT')return;if(e.key>='1'&&e.key<='6'){const idx=parseInt(e.key)-1;if(SCENARIOS[idx]){const s=SCENARIOS[idx];activeScenario=s.id;btcPrice=s.btc||(liveBtcPrice||97000);mnavMultiple=s.mnav;syncSliders();buildScenarioBar();updateMnavPresets();render()}}});
loadData();
</script>
</body>
</html>
